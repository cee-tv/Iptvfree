(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2183],{2183:function(e,t,s){"use strict";s.r(t);var l=s(85893),a=s(67294),n=s(75227),r=s(72548);s(30240);var i=s(44210),o=s(6790),c=s(45929),u=s(98456),d=s(45445);s(87520);var h=s(30127),g=s(81354),m=s(82379),C=s(30120),f=s(11163),v=s(77781),y=s(14691),p=s(44510),x=s(25675),S=s.n(x),j=s(40762),w=s(22143),N=s(2737),H=s(8831),F=s(6154),b=s(7264),M=s(89831);t.default=()=>{let e=(0,f.useRouter)(),t=(0,a.useRef)(null),{makeRequest:s}=(0,r.Z)(),{view:x}=(0,f.useRouter)().query,{user:L,alert:Z,streamData:T,m3uStreams:k,m3uUrl:E,homeM3uStreams:A,currentPlayer:D}=(0,a.useContext)(i.I),{live:z}=k.streams,[R,P]=(0,a.useState)([]),[B,I]=(0,a.useState)([]),[_,U]=(0,a.useState)([]),[K,O]=(0,a.useState)(!1),[Y,q]=(0,a.useState)(null),[G,J]=(0,a.useState)([]),[Q,V]=(0,a.useState)([]),[W,X]=(0,a.useState)(null),[$,ee]=(0,a.useState)([]),[et,es]=(0,a.useState)(0),[el,ea]=(0,a.useState)(null),[en,er]=(0,a.useState)(null),[ei,eo]=(0,a.useState)(!1),[ec,eu]=(0,a.useState)([]),[ed,eh]=(0,a.useState)([]),[eg,em]=(0,a.useState)(!1),[eC,ef]=(0,a.useState)({favourite:!0,channelHistory:!0}),[ev,ey]=(0,a.useState)(!1),[ep,ex]=(0,a.useState)(!1),[eS,ej]=(0,a.useState)(!1),[ew,eN]=(0,a.useState)(!1),[eH,eF]=(0,a.useState)(!1),[eb,eM]=(0,a.useState)(!1),eL=(0,y.A)("currentUser"),[eZ,eT]=(0,a.useState)(""),[ek,eE]=(0,a.useState)(null),[eA,eD]=(0,a.useState)(null),{movies:ez,series:eR,live:eP}=k.streams;(0,a.useEffect)(()=>{L&&(k.streams.live?eB():eI())},[L,k.streams.live]),(0,a.useEffect)(()=>{L&&eP&&Y&&(J([]),eJ(),eQ(),eG())},[L,eP,Y]),(0,a.useEffect)(()=>{if(R&&eP){if(x){let e=g.AES.decrypt(decodeURIComponent(x),"thisisliveurl").toString(g.enc.Utf8),t=eP.filter(t=>(0,b.C)(String(t.url))===(0,b.C)(String(e)))[0],s=t.group.title,l=R.filter(e=>String(e)===String(s))[0];q(l),ea(e)}else q(R[0]),ea((0,b.C)(eP[0].url))}},[R,eP]),(0,a.useEffect)(()=>{J([]),Y&&eP&&t.current&&(eG(),eQ(),eJ(),t.current.scrollTo(0,0))},[Y,eP,t]),(0,a.useEffect)(()=>{Q.length>0&&(eX(),eo(!0))},[Q]),(0,a.useEffect)(()=>{x?ey(!0):ey(!1)},[x]),(0,a.useEffect)(()=>{if(el&&ei&&Q.length>0){let e=new Date().getTime(),t="number"==typeof Q[0].end?C.ou.fromSeconds(Q[0].end,{zone:e_}).toFormat("yyyy-MM-dd HH:mm:ss"):Q[0].end,s=C.ou.fromFormat(t,"yyyy-MM-dd HH:mm:ss",{zone:e_}).setZone("Asia/Kolkata"),l=new Date(s).getTime()+1e5,a=l-e;if(a>0){let e=setTimeout(()=>{eV(G.filter(e=>(0,b.C)(String(e.url))===String(el))[0])},a);return()=>clearTimeout(e)}}},[el,ei,Q]);let eB=()=>{let e=[];z.map(t=>{let s=e.filter(e=>e===t.group.title).length>0,l=t.group.title;!s&&null!==l&&l.length>0&&e.push(l)}),P(e)},eI=async()=>{O(!0);try{let e=await F.Z.get(E.url),t=(0,H.parse)(e.data),s=t.items.filter(e=>e.group.title.length>0&&e.name.length>0).length>0;if(t&&s){let e=t.items.filter(e=>!e.url.includes("/movie/")),s=t.items.filter(e=>e.url.includes("/series/")),l=t.items.filter(e=>!e.url.includes("/movie/")&&!e.url.includes("/series/"));k.toggle(e,s,l),A.toggle(t.items)}}catch(e){console.log("ERROR",e)}O(!1)},e_="America/NewYork",eU=(e,t)=>{let s=e.split("//")[1],l=s.split("/");if(4!==l.length)return e;let[a,n,r,i]=l,[o,c]=i.split("."),u="http://".concat(a,"/live/").concat(n,"/").concat(r,"/").concat(o,".").concat(t);return u};function eK(e){if(e instanceof Date||(e=new Date(e)),isNaN(e.getTime()))return null;let t=e.getFullYear(),s=String(e.getMonth()+1).padStart(2,"0"),l=String(e.getDate()).padStart(2,"0"),a=String(e.getHours()).padStart(2,"0"),n=String(e.getMinutes()).padStart(2,"0"),r=String(e.getSeconds()).padStart(2,"0");return"".concat(t,"-").concat(s,"-").concat(l," ").concat(a,":").concat(n,":").concat(r)}let eO=e=>{let t=new Date(e).getTime();if("NaN"!==t.toString()){if("one-stream-panel"===L.loginType){let e=eK(t),s=C.ou.fromFormat(e,"yyyy-MM-dd HH:mm:ss");return s.toLocaleString(C.ou.TIME_SIMPLE)}{let e=eK(t),s=C.ou.fromFormat(e,"yyyy-MM-dd HH:mm:ss",{zone:e_}),l=s.setZone("Asia/Kolkata");return l.toLocaleString(C.ou.TIME_SIMPLE)}}return null},eY=["adult","xxx","porn","sex","adults","ADULTS","+18","18+","18"],eq=async(e,t)=>{var s;let l=(0,b.C)(e.url),a=null===(s=eP.filter(e=>(0,b.C)(String(null==e?void 0:e.url))===String(l))[0])||void 0===s?void 0:s.group.title;V([]),X(null);let n=eY.filter(e=>a.toLowerCase().includes(e.toLowerCase())).length>0;setTimeout(()=>{if(ew)try{V([]),X(e.url)}catch(e){console.log(e)}else if(eL){if(ej(n),n){if(n&&t){try{V([]),X(e.url)}catch(e){console.log(e)}ej(!1),eN(!1)}}else{try{V([]),X(e.url)}catch(e){console.log(e)}eN(!1)}}else X(e.url)},500)},eG=e=>{if("Favourites"!==Y&&"Channel History"!==Y){let t=eP.filter(e=>String(null==e?void 0:e.group.title).toLowerCase()===String(Y).toLowerCase());if(J(t),x||(ea(el||(0,b.C)(t[0].url)),eb||(eV(t[0]),er(t[0]),eM(!0))),!eb&&"fav"!==e){if(x){let e=g.AES.decrypt(x.replace(/ /g,"+"),"thisisliveurl").toString(g.enc.Utf8),t=eP.filter(t=>t.url===e)[0];eV(t),eM(!0)}else eq(t[0],ew),eM(!0)}}},eJ=async()=>{try{let e=await (0,m.on)("LiveTv",L.dbAddress),t=e.val()?Object.keys(e.val()):[];ee(t);let s=[];t.map(e=>{let t=eP.filter(t=>(0,b.C)(String(t.url))===String(e))[0];t&&s.push(t)}),eu(s)}catch(e){eu([])}eG("fav")},eQ=async()=>{try{let e=await (0,m.B4)("LiveTv",L.dbAddress),t=Object.keys(e.val()),s=[];t.map(e=>{let t=eP.filter(t=>(0,b.C)(String(t.url))===String(e))[0];t&&s.push(t)}),eh(s)}catch(e){eh([])}},eV=e=>{X(null);let t=(0,b.C)(e.url);eq(e,ew),ea(String(t))},eW=async(e,t)=>{let s=(0,b.C)(e);t?await (0,m.h2)(s,"LiveTv",L.dbAddress):await (0,m.zg)(s,"LiveTv",L.dbAddress),eJ(),Z.toggle({title:"".concat(t?"Removed from Favourites":"Added To Favourites"),show:!0,type:"success"})},eX=()=>{let{start:e,end:t}=Q[0],s="number"==typeof e?C.ou.fromSeconds(e,{zone:e_}).toFormat("yyyy-MM-dd HH:mm:ss"):e,l="number"==typeof t?C.ou.fromSeconds(t,{zone:e_}).toFormat("yyyy-MM-dd HH:mm:ss"):t,a=C.ou.fromFormat(s,"yyyy-MM-dd HH:mm:ss",{zone:e_}).setZone("Asia/Kolkata"),n=C.ou.fromFormat(l,"yyyy-MM-dd HH:mm:ss",{zone:e_}).setZone("Asia/Kolkata"),r=new Date(a).getTime(),i=new Date(n).getTime(),o=new Date().getTime(),c=Number((100*((o-r)/1e3)/((i-r)/1e3)).toFixed(2));es(c)},e$=async()=>{ey(!1);try{await m.Gg.liveTv(el,L.dbAddress)}catch(e){console.log(e)}},e1=(e,t)=>{er(t);let s=e.target.tagName;"svg"===s||"path"===s||eV(t)},e0=e=>{eN(!1),ea(null);let t=eY.filter(t=>e.toLowerCase().includes(t.toLowerCase())).length>0;eL?(ej(t),eD(e),t?t&&ew&&(q(e),ej(!1),eN(!1)):(q(e),eN(!1))):(q(e),eN(!1))};return K?(0,l.jsx)(o.Z,{}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.default,{currentAction:"live"}),eH||!ez||ez&&0===ez.length||!eR||eR&&0===eR.length?(0,l.jsxs)("div",{className:"no-data-found-container",children:[(0,l.jsx)(S(),{src:j.Z,alt:"live-stream"}),(0,l.jsx)("h2",{className:"no-data-found",children:"No Live Streams found"})]}):(0,l.jsxs)("section",{className:"liveTv",children:[(0,l.jsxs)("div",{className:"panel tvCategory",children:[(0,l.jsx)("div",{className:"pHead",children:(0,l.jsxs)("div",{className:"controls",children:[eZ.length>0?(0,l.jsx)(p.Z,{sx:{zIndex:9,":hover":{cursor:"pointer"}},onClick:()=>{eT(""),em(!1),ef({favourite:!0,channelHistory:!0})}}):(0,l.jsxs)("svg",{width:"34",height:"34",viewBox:"0 0 34 34",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[" ",(0,l.jsx)("path",{d:"M24.1175 26.1783C17.3706 31.352 8.08155 29.4127 3.57637 23.2248C-0.68313 17.3743 0.0222769 9.14911 5.26344 4.18996C10.6336 -0.891038 18.8046 -1.19482 24.501 3.47881C30.3196 8.25287 31.6682 16.9694 26.8365 23.4239C26.9409 23.5359 27.0477 23.6578 27.162 23.7719C29.1119 25.7217 31.0609 27.6722 33.0147 29.6185C33.5862 30.1878 33.854 30.8417 33.6315 31.6459C33.2639 32.9734 31.6879 33.5093 30.5881 32.6788C30.431 32.5601 30.2915 32.4168 30.1513 32.277C28.2428 30.3722 26.335 28.4663 24.4296 26.5579C24.3115 26.4402 24.2163 26.3001 24.1175 26.1783ZM15.2969 25.2385C21.1588 25.229 25.8636 20.5245 25.8675 14.668C25.8717 8.79405 21.1448 4.07337 15.2667 4.08145C9.40626 4.08917 4.70179 8.79476 4.69757 14.6522C4.6937 20.528 9.41961 25.248 15.2969 25.2385Z",fill:"#748BC8"})," "]}),(0,l.jsx)("input",{onChange:e=>{let{value:t}=e.target;if(eT(t),I(R.filter(e=>e.toLowerCase().includes(t.toLowerCase()))),0===t.length)em(!1),ef({favourite:!0,channelHistory:!0});else{let e="favourite".includes(t),s="channel history".includes(t);ef({favourite:e,channelHistory:s}),em(!0)}},value:eZ,placeholder:"Search by Category or Channel name"})]})}),(0,l.jsxs)("div",{className:"pBody",children:[eC.favourite&&(0,l.jsx)("a",{onClick:()=>e0("Favourites"),href:"javascript:void(0)",children:"Favourite"}),eC.channelHistory&&(0,l.jsx)("a",{onClick:()=>e0("Channel History"),href:"javascript:void(0)",children:"Channel History"}),(eg?B:R).map(e=>{let t=eY.filter(t=>e.toLowerCase().includes(t)).length>0;return(0,l.jsxs)("a",{style:{display:"flex",justifyContent:"space-between"},className:e===Y?"active":"",onClick:()=>e0(e),href:"javascript:void(0)",children:[e,(0,l.jsx)("svg",{display:t&&eL?"block":"none",width:"20",height:"26",viewBox:"0 0 20 26",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,l.jsx)("path",{d:"M9.35342 0.978516C9.71046 0.978516 10.0675 0.978516 10.4246 0.978516C10.6069 1.0108 10.7891 1.04529 10.972 1.07454C13.6371 1.50415 15.8459 3.8255 16.0656 6.51604C16.1583 7.65313 16.1075 8.80208 16.1216 9.94578C16.1229 10.0653 16.1218 10.1847 16.1218 10.3277C16.3536 10.3277 16.5625 10.3274 16.7714 10.3277C18.2385 10.3296 19.2373 11.3213 19.2379 12.7826C19.2392 16.337 19.239 19.8918 19.2379 23.4462C19.2373 24.9108 18.2409 25.908 16.7791 25.9094C15.3184 25.9108 13.8576 25.9097 12.3969 25.9097C9.24001 25.9097 6.08316 25.9124 2.92631 25.9083C1.60326 25.9066 0.549224 24.9067 0.545085 23.6167C0.533772 19.9486 0.535152 16.2805 0.545085 12.6123C0.54812 11.4981 1.37617 10.547 2.47545 10.3743C2.8554 10.3147 3.24694 10.3277 3.65641 10.3061C3.65641 10.2176 3.65641 10.1301 3.65641 10.0429C3.65696 9.06089 3.64813 8.07888 3.65972 7.09714C3.69007 4.49186 5.41763 2.12443 7.89129 1.3179C8.36506 1.16338 8.86531 1.08944 9.35342 0.978516ZM14.04 10.321C14.04 9.49768 14.0469 8.69612 14.0372 7.89484C14.0314 7.42549 14.0414 6.95007 13.9718 6.48817C13.6457 4.31968 11.4524 2.74195 9.29354 3.10037C7.17969 3.45107 5.74929 5.12373 5.73853 7.26407C5.73384 8.20498 5.73743 9.14615 5.73798 10.0871C5.73798 10.1638 5.7446 10.2405 5.74819 10.321C8.51957 10.321 11.2598 10.321 14.04 10.321ZM9.88457 14.4809C8.99416 14.4842 8.19481 15.0664 7.91475 15.9154C7.63634 16.7589 7.92192 17.6764 8.65147 18.2081C8.81095 18.3242 8.86062 18.4412 8.85786 18.628C8.8482 19.293 8.85206 19.958 8.85593 20.623C8.85675 20.7515 8.86282 20.8848 8.89732 21.0073C9.03279 21.4883 9.51318 21.8086 9.9897 21.749C10.5222 21.6822 10.9071 21.2879 10.9174 20.7609C10.9312 20.0557 10.9295 19.3498 10.9187 18.6443C10.9157 18.4478 10.967 18.3253 11.1326 18.2036C11.8607 17.6681 12.1408 16.7523 11.8583 15.908C11.5735 15.0553 10.7742 14.4776 9.88457 14.4809Z",fill:"white"})})]})}),eg&&0===B.length&&!eC.channelHistory&&!eC.favourite&&(0,l.jsx)("h1",{className:"no-category-found",children:"No Categories Found !"})]})]}),(0,l.jsxs)("div",{className:"panel tvList",children:[(0,l.jsx)("div",{className:"pHead",children:(0,l.jsx)("span",{className:"h5",children:Y})}),(0,l.jsxs)("div",{className:"pBody",ref:t,children:[("Favourites"===Y?ec:"Channel History"===Y?ed:G).map((e,t)=>{let{stream_id:s}=e,a=$.filter(t=>String(t)===(0,b.C)(String(e.url))).length>0,n=(0,b.C)(e.url)===String(el),r=R.filter(t=>String(t)===String(e.group.title))[0],i=eY.filter(e=>r.toLowerCase().includes(e.toLowerCase())).length>0;return(0,l.jsxs)("div",{onClick:t=>e1(t,e),style:{background:n&&"rgb(255,255,255,0.1)"},className:"list",children:[(0,l.jsxs)("div",{className:"channelList",children:[(0,l.jsx)("a",{href:"javascript:void(0)",className:"thumb",children:ek===t?(0,l.jsx)(S(),{alt:"placeholder",src:w.Z}):i&&(0,y.A)("currentUser")&&("Favourites"===Y||"Channel History"===Y)?(0,l.jsx)(S(),{alt:"placeholder",style:{objectFit:"contain",padding:"15px"},src:N.Z}):e.tvg.logo?(0,l.jsx)("img",{src:e.tvg.logo,onError:()=>eE(t)}):(0,l.jsx)(S(),{alt:"placeholder",src:w.Z})}),(0,l.jsxs)("span",{className:"info",children:[(0,l.jsxs)("a",{href:"javascript:void(0)",children:[(0,l.jsx)("strong",{children:e.name}),"Program info Entertainment "]}),n&&(0,l.jsx)(c.ZP,{className:"live-stream-slider",value:n?et:0,size:"small",sx:{width:"90%",color:"#615DFC !important"},disabled:!0})]})]}),(0,l.jsx)("a",{className:"favourite",id:"favourite-el",href:"javascript:void(0)",children:(0,l.jsxs)("svg",{onClick:()=>eW(e.url,a),width:"25",height:"23",viewBox:"0 0 25 23",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[" ",(0,l.jsx)("path",{d:"M24.7976 7.2086C24.7976 7.54497 24.7976 7.88134 24.7976 8.21745C24.785 8.2871 24.7666 8.35624 24.7611 8.42614C24.6679 9.60254 24.2942 10.6901 23.7202 11.7141C22.9972 13.0041 22.0421 14.1134 20.9974 15.1449C18.4649 17.6453 15.6791 19.8596 13.0023 22.197C12.6849 22.4744 12.3046 22.4572 11.9748 22.1827C11.698 21.9523 11.4259 21.7161 11.1547 21.4789C9.00273 19.5982 6.83161 17.7395 4.70792 15.8278C3.39096 14.6423 2.1868 13.3382 1.31572 11.7747C-0.14759 9.14833 -0.226068 6.48212 1.24456 3.83987C2.05937 2.37555 3.31753 1.39294 4.94058 0.933683C6.67188 0.443893 8.33151 0.62053 9.87507 1.58901C10.8574 2.20547 11.6059 3.05081 12.2188 4.02484C12.3094 4.16867 12.3977 4.31377 12.4631 4.41924C12.9281 3.81943 13.3354 3.18783 13.8459 2.65514C15.6448 0.778747 17.8308 0.205432 20.2936 1.01695C22.6116 1.78079 23.9556 3.49467 24.5549 5.81947C24.6717 6.27318 24.7184 6.74505 24.7976 7.2086Z",fill:a?"#FF0000":"white"})]})})]})}),"Favourites"===Y&&0===ec.length?(0,l.jsx)("h1",{className:"no-category-found",children:"No Favourite Streams found !"}):"Channel History"===Y&&0===ed.length?(0,l.jsx)("h1",{className:"no-category-found",children:"No Channel History found !"}):0===G.length&&"Favourites"!==Y&&"Channel History"!==Y?(0,l.jsx)("h1",{className:"no-category-found",children:"No Live streams found !"}):null]})]}),(0,l.jsx)("div",{style:{position:"relative"},className:"steamDetail panel",children:0!==Q.length||W?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:"videoPlay",children:"videojs"===D.player?(0,l.jsx)(M.Z,{getFavouriteChannels:eJ,opened:ev,favourites:$,src:eU(W,"m3u8"),currentStreams:G,currentStream:el,playingStream:en,onPlayerReady:e$,restart:e=>eV(G[e]),onPreviousChannel:e=>{ep&&ey(!0),eV(G[e-1])},onNextChannel:e=>{ep&&ey(!0),eV(G[e+1])},onfullscreen:e=>ex(e),onclose:()=>{ey(!1),ex(!1),e.push("/dashboard/live",void 0,{shallow:!0})}}):(0,l.jsx)(h.default,{getFavouriteChannels:eJ,opened:ev,favourites:$,src:eU(W,"m3u8"),currentStreams:G,currentStream:el,playingStream:en,onPlayerReady:e$,restart:e=>eV(G[e]),onPreviousChannel:e=>{ep&&ey(!0),eV(G[e-1])},onNextChannel:e=>{ep&&ey(!0),eV(G[e+1])},onfullscreen:e=>ex(e),onclose:()=>{ey(!1),ex(!1),e.push("/dashboard/live",void 0,{shallow:!0})}})}),Q.length>0?(0,l.jsxs)("div",{className:"panel",children:[(0,l.jsx)("div",{className:"pHead",children:(0,l.jsx)("span",{className:"h5",children:null==en?void 0:en.name})}),(0,l.jsx)("div",{className:"pBody",children:Q.map((e,t)=>{let s=eO(e.start),a=eO(e.end)?eO(e.end):eO(e.stop),n=atob(e.title);return s&&a?(0,l.jsxs)("span",{className:0===t?"active":"",children:[(0,l.jsx)("b",{children:s}),"-",(0,l.jsx)("b",{children:a})," ",n]}):null})})]}):(0,l.jsx)("div",{className:"no-epg-found",children:(0,l.jsx)("p",{children:"No Epgs found related to this channel !"})})]}):(0,l.jsx)(u.Z,{className:"loader-icon"})})]}),(0,l.jsx)(v.Z,{action:"verify",close:()=>ej(!1),open:eS,completed:()=>{eN(!0),ej(!1),("Favourites"===Y.category_name||"Channel History"===Y.category_name)&&eq(en,!0),q(eA)}}),ev&&(0,l.jsx)(d.Z,{sx:{background:"black",position:"fixed",top:0,zIndex:9999,left:0,width:"100%",height:"100%"},open:!0,children:(0,l.jsx)(u.Z,{sx:{color:"white"}})})]})}},87520:function(){}}]);